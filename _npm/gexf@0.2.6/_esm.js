/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/gexf@0.2.6/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e from"../xmldom@0.1.31/_esm.js";var t,r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={exports:{}};t=n,r=n.exports,function(e){var i={getModelTags:function(e){var t,r=e.getElementsByTagName("attributes"),i={},n=r.length;for(t=0;t<n;t++)i[r[t].getAttribute("class")]=r[t].childNodes;return i},nodeListToArray:function(e){for(var t=[],r=0,i=e.length;r<i;++r)"#text"!==e[r].nodeName&&t.push(e[r]);return t},nodeListEach:function(e,t){for(var r=0,i=e.length;r<i;++r)"#text"!==e[r].nodeName&&t(e[r])},nodeListToHash:function(e,t){for(var r={},i=0;i<e.length;i++)if("#text"!==e[i].nodeName){var n=t(e[i]);r[n.key]=n.value}return r},namedNodeMapToObject:function(e){for(var t={},r=0;r<e.length;r++)t[e[r].name]=e[r].value;return t},getFirstElementByTagNS:function(e,t,r){var i=e.getElementsByTagName(t+":"+r)[0];return i||(i=e.getElementsByTagNameNS(t,r)[0]),i||(i=e.getElementsByTagName(r)[0]),i},getAttributeNS:function(t,r,i){var n=t.getAttribute(r+":"+i);return n===e&&(n=t.getAttributeNS(r,i)),n===e&&(n=t.getAttribute(i)),n},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};function n(e){var t={};t.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:i.getModelTags(e)},t.hasViz=!!i.getAttributeNS(t.els.root,"xmlns","viz"),t.version=t.els.root.getAttribute("version")||"1.0",t.mode=t.els.graph.getAttribute("mode")||"static";var r=t.els.graph.getAttribute("defaultedgetype");function n(e){var r=[];return t.els.model[e]&&i.nodeListEach(t.els.model[e],(function(e){var t={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},n=i.nodeListToArray(e.childNodes);n.length>0&&(t.defaultValue=n[0].textContent),r.push(t)})),r.length>0&&r}function a(e,t){var r={},n=t.getElementsByTagName("attvalue"),a=i.nodeListToHash(n,(function(e){var t=i.namedNodeMapToObject(e.attributes);return{key:t.id||t.for,value:t.value}}));return e.map((function(e){r[e.id]=!(e.id in a)&&"defaultValue"in e?i.enforceType(e.type,e.defaultValue):i.enforceType(e.type,a[e.id])})),r}t.defaultEdgetype=r||"undirected";var o,s,d,l=n("node"),u=n("edge"),h={version:t.version,mode:t.mode,defaultEdgeType:t.defaultEdgetype,meta:(d={},t.els.meta?(d.lastmodifieddate=t.els.meta.getAttribute("lastmodifieddate"),i.nodeListEach(t.els.meta.childNodes,(function(e){d[e.tagName.toLowerCase()]=e.textContent})),d):d),model:{},nodes:(o=l,s=[],i.nodeListEach(t.els.nodes,(function(e){var r={id:e.getAttribute("id"),label:e.getAttribute("label")||""};o&&(r.attributes=a(o,e)),t.hasViz&&(r.viz=function(e){var t={},r=i.getFirstElementByTagNS(e,"viz","color");if(r){var n=["r","g","b","a"].map((function(e){return r.getAttribute(e)}));t.color=i.getRGB(n)}var a=i.getFirstElementByTagNS(e,"viz","position");a&&(t.position={},["x","y","z"].map((function(e){t.position[e]=+a.getAttribute(e)})));var o=i.getFirstElementByTagNS(e,"viz","size");o&&(t.size=+o.getAttribute("value"));var s=i.getFirstElementByTagNS(e,"viz","shape");return s&&(t.shape=s.getAttribute("value")),t}(e)),s.push(function(e){var t={id:e.id,label:e.label};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}(r))})),s),edges:function(e,r){var n=[];return i.nodeListEach(t.els.edges,(function(o){var s=i.namedNodeMapToObject(o.attributes);"type"in s||(s.type=r),e&&(s.attributes=a(e,o)),t.hasViz&&(s.viz=function(e){var t={},r=i.getFirstElementByTagNS(e,"viz","color");if(r){var n=["r","g","b","a"].map((function(e){return r.getAttribute(e)}));t.color=i.getRGB(n)}var a=i.getFirstElementByTagNS(e,"viz","shape");a&&(t.shape=a.getAttribute("value"));var o=i.getFirstElementByTagNS(e,"viz","thickness");return o&&(t.thickness=+o.getAttribute("value")),t}(o)),n.push(function(e){var t={id:e.id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}(s))})),n}(u,t.defaultEdgetype)};return l&&(h.model.node=l),u&&(h.model.edge=u),h}function a(e,t){var r=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject)for(t in e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"])try{return new ActiveXObject(e[t])}catch(e){}return null}();if(!r)throw"XMLHttpRequest not supported, cannot load the file.";var i,n="function"==typeof t;return r.overrideMimeType?(r.overrideMimeType("text/xml"),i=function(e){return e.responseXML}):i=function(e){return(new DOMParser).parseFromString(e.responseText,"application/xml")},r.open("GET",e,n),n&&(r.onreadystatechange=function(){4===r.readyState&&t(i(r))}),r.send(),n?r:i(r)}var o={parse:function(e){return n(e)},fetch:function(e,t){return"function"==typeof t?a(e,(function(e){t(n(e))})):n(a(e))},version:"0.2.5"};t.exports&&(r=t.exports=o),r.gexf=o}.call(i);var a={exports:{}};!function(e,t){(function(r,i){var n=["integer","long","double","float","boolean","liststring","string","anyURI"];function a(e,t){switch(e){case"boolean":case"integer":case"long":case"float":case"double":return""+t;case"liststring":if(t instanceof Array)return t.join("|")}if("object"==typeof t)throw Error("gexf.writer.cast: trying to cast an object to a string.");return t}function o(e){var t=[0,0,0];return e.match(/^#/)?t=3===(e=(e||"").replace(/^#/,"")).length?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]:e.match(/^ *rgba? *\(/)&&(t=[+(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],+e[2],+e[3]],e[4]&&t.push(+e[4].replace(", ",""))),t}function s(e){var t,i,n=(e=e||{}).implementation||r.implementation;if(this.serializer=e.serializer?new e.serializer:new XMLSerializer,this.document=n.createDocument("http://www.gexf.net/1.2draft","gexf",null),this.root=this.document.documentElement,this.xmlns=e.namespace||"http://www.gexf.net/1.2draft",this.vizXmlns=e.vizNamespace||"http:///www.gexf.net/1.2draft/viz",this.root.setAttribute("xmlns",this.xmlns),this.root.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),this.root.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),this.hasViz=!1,this.root.setAttribute("version",e.version||"1.2"),this.encoding=e.encoding||"UTF-8",e.meta&&this.setMeta(e.meta),this.graph=this.createElement("graph",{defaultedgetype:e.defaultEdgeType||"undirected",mode:e.mode}),this.root.appendChild(this.graph),this.model={node:{},edge:{}},this.nodeAttributes=null,this.edgeAttributes=null,e.model&&e.model.node&&this.setNodeModel(e.model.node),e.model&&e.model.edge&&this.setEdgeModel(e.model.edge),this.nodes=this.createElement("nodes"),this.edges=this.createElement("edges"),this.graph.appendChild(this.nodes),this.graph.appendChild(this.edges),e.nodes)for(t=0,i=e.nodes.length;t<i;t++)this.addNode(e.nodes[t]);if(e.edges)for(t=0,i=e.edges.length;t<i;t++)this.addEdge(e.edges[t])}s.prototype.createElement=function(e,t,r){if(!e)throw Error("gexf.writer.createElement: wrong arguments.");"object"==typeof t&&(r=t,t=null);var i=this.document.createElement(e);if(t){var n=this.document.createTextNode(t);i.appendChild(n)}if(r)for(var a in r)void 0!==r[a]&&null!==r[a]&&i.setAttribute(a,r[a]);return i},s.prototype.setMeta=function(e){e=e||{};var t,r=this.document.createElement("meta");for(t in e)"lastmodifieddate"===t?r.setAttribute("lastmodifieddate",e[t]):r.appendChild(this.createElement(t,e[t]));return this.root.appendChild(r),this},s.prototype.setModel=function(e,t){if(t=t||[],"node"!==e&&"edge"!==e)throw Error('gexf.writer.setModel: wrong model cls "'+e+'"');if(!(t instanceof Array))throw Error("gexf.writer.setModel: model is not a valid array.");this.model[e]={};var r,i,n=this.createElement("attributes",{class:e}),a=e+"Attributes";for(this[a]&&this.graph.removeChild(this[a]),this[a]=n,this.graph.insertBefore(n,this.nodes||this.edges),r=0,i=t.length;r<i;r++)this.addAttribute(e,t[r]);return this},s.prototype.setNodeModel=function(e){return this.setModel("node",e)},s.prototype.setEdgeModel=function(e){return this.setModel("edge",e)},s.prototype.addAttribute=function(e,t){if("node"!==e&&"edge"!==e)throw Error('gexf.writer.addAttribute: wrong model cls "'+e+'"');if(!t)throw Error("gexf.writer.addAttribute: wrong arguments.");if(!this[e+"Attributes"])return this.setModel(e,[t]);var r=t.type||"string";if(!~n.indexOf(r))throw Error('gexf.writer.addAttribute: unknown attribute type "'+r+'"');this.model[e][t.id]=t;var i=this.createElement("attribute",{id:t.id,title:t.title,type:r});if(void 0!==t.defaultValue){var a=this.createElement("default",t.defaultValue);i.appendChild(a)}return this[e+"Attributes"].appendChild(i),this},s.prototype.addNodeAttribute=function(e){return this.addAttribute("node",e)},s.prototype.addEdgeAttribute=function(e){return this.addAttribute("edge",e)},s.prototype.addNode=function(e){var t,r,i;if(void 0===e.id||null===e.id)throw Error("gexf.writer.addNode: inexistent id.");var n=this.createElement("node",{id:e.id,label:e.label});if(e.attributes&&Object.keys(e.attributes).length>0){var s=this.createElement("attvalues");for(t in e.attributes||{}){if(r=e.attributes[t],!(i=this.model.node[t]))throw Error('gexf.writer.addNode: property "'+t+'" not registered in node model.');var d=this.createElement("attvalue",{for:i.id,value:a(i.type,r)});s.appendChild(d)}n.appendChild(s)}if(e.viz){if(this.hasViz||(this.hasViz=!0,this.root.setAttribute("xmlns:viz",this.vizXmlns)),e.viz.color){var l=o(e.viz.color),u=this.createElement("viz:color",{r:l[0],g:l[1],b:l[2],a:l[3]});n.appendChild(u)}if(e.viz.position){var h=this.createElement("viz:position",{x:e.viz.position.x,y:e.viz.position.y,z:e.viz.position.z});n.appendChild(h)}if(e.viz.size){var c=this.createElement("viz:size",{value:e.viz.size});n.appendChild(c)}if(e.viz.shape){var g=this.createElement("viz:shape",{value:e.viz.shape});n.appendChild(g)}}return this.nodes.appendChild(n),this},s.prototype.addEdge=function(e){var t,r,i,n=this.createElement("edge",{id:e.id,label:e.label,weight:e.weight,type:e.type,source:e.source,target:e.target});if(e.attributes&&Object.keys(e.attributes).length>0){var s=this.createElement("attvalues");for(t in e.attributes||{}){if(r=e.attributes[t],!(i=this.model.edge[t]))throw Error('gexf.writer.addEdge: property "'+t+'" not registered in edge model.');var d=this.createElement("attvalue",{for:i.id,value:a(i.type,r)});s.appendChild(d)}n.appendChild(s)}if(e.viz){if(this.hasViz||(this.hasViz=!0,this.root.setAttribute("xmlns:viz",this.vizXmlns)),e.viz.color){var l=o(e.viz.color),u=this.createElement("viz:color",{r:l[0],g:l[1],b:l[2],a:l[3]});n.appendChild(u)}if(e.viz.shape){var h=this.createElement("viz:shape",{value:e.viz.shape});n.appendChild(h)}if(e.viz.thickness){var c=this.createElement("viz:thickness",{value:e.viz.thickness});n.appendChild(c)}}return this.edges.appendChild(n),this},s.prototype.serialize=function(){return'<?xml version="1.0" encoding="'+this.encoding+'"?>'+this.serializer.serializeToString(this.document)};var d={create:function(e){return new s(e)},version:"0.2.5"};e.exports&&(t=e.exports=d),t.gexf=d}).call(i,"document"in i?i.document:{})}(a,a.exports);var o=e.DOMParser,s=e.DOMImplementation,d=e.XMLSerializer,l=n.exports,u=a.exports;function h(){var e,t,r,i={};for(e=arguments.length-1;e>=0;e--)for(t in arguments[e])!i[t]||(!((r=arguments[e][t])instanceof Object)||r instanceof Array||r instanceof Function)?i[t]=arguments[e][t]:i[t]=h(arguments[e][t],i[t]);return i}var c={};Object.defineProperty(c,"version",{value:"0.2.5"}),c.parse=function(e){var t=(new o).parseFromString(e,"application/xml");return l.parse(t)},c.create=function(e){return u.create.call(u,h({implementation:s.prototype,serializer:d},e))};var g=c,p=g.create,f=g.parse;export{p as create,g as default,f as parse};
